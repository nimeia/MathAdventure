# MazeScene å€’è®¡æ—¶ç³»ç»Ÿå®ç°è¯´æ˜

## â° åŠŸèƒ½æ¦‚è¿°

MazeScene ç°å·²å®Œæ•´é›†æˆå€’è®¡æ—¶ç³»ç»Ÿï¼Œæ¯é“é¢˜ç›®æœ‰ **8ç§’** ç­”é¢˜æ—¶é—´ã€‚

## âœ… å·²å®ç°åŠŸèƒ½

### 1. å€’è®¡æ—¶æ§åˆ¶
- **æ¯é¢˜8ç§’**ï¼š`QUESTION_TIME = 8.0`
- **è‡ªåŠ¨å€’è®¡æ—¶**ï¼šé€šè¿‡ `_process()` å‡½æ•°æ¯å¸§æ›´æ–°
- **è¶…æ—¶åˆ¤å®š**ï¼šæ—¶é—´åˆ°è‡ªåŠ¨åˆ¤å®šä¸ºé”™è¯¯ç­”æ¡ˆ

### 2. è§†è§‰åé¦ˆ

#### ProgressBar (TimerBar) æ˜¾ç¤º
```gdscript
# å®æ—¶æ›´æ–°è¿›åº¦æ¡
timer_bar.value = countdown_timer

# é¢œè‰²å˜åŒ–
> 5ç§’ï¼šç»¿è‰² Color(0.5, 1.0, 0.5)
3-5ç§’ï¼šé»„è‰² Color(1.0, 1.0, 0.5)
< 3ç§’ï¼šçº¢è‰² Color(1.0, 0.3, 0.3)
```

#### æ—¶é—´æ ‡ç­¾æ˜¾ç¤º
```gdscript
# æ˜¾ç¤ºå‰©ä½™ç§’æ•°
timer_label.text = str(time_left)

# è­¦å‘Šæ•ˆæœ
> 5ç§’ï¼šç™½è‰²ï¼Œæ­£å¸¸å¤§å°
3-5ç§’ï¼šé»„è‰²ï¼Œæ­£å¸¸å¤§å°
< 3ç§’ï¼šçº¢è‰²ï¼Œé—ªçƒæ”¾å¤§
```

### 3. å€’è®¡æ—¶ç®¡ç†å‡½æ•°

#### `reset_timer()`
é‡ç½®å€’è®¡æ—¶åˆ°8ç§’ï¼Œç”¨äºï¼š
- ç”Ÿæˆæ–°é¢˜ç›®æ—¶
- ç­”é”™åé‡è¯•æ—¶

#### `stop_timer()`
åœæ­¢å€’è®¡æ—¶ï¼Œç”¨äºï¼š
- ç©å®¶é€‰æ‹©ç­”æ¡ˆæ—¶
- æ¸¸æˆç»“æŸæ—¶

#### `clear_ui_state()`
æ¸…ç©ºæ‰€æœ‰UIçŠ¶æ€ï¼Œç”¨äºï¼š
- è¶…æ—¶åç”Ÿæˆæ–°é¢˜
- å‡†å¤‡ä¸‹ä¸€é¢˜å‰

### 4. è¶…æ—¶å¤„ç†æµç¨‹

```mermaid
graph TD
    A[å€’è®¡æ—¶å¼€å§‹ 8ç§’] --> B{æ¯å¸§æ£€æµ‹}
    B --> C[æ›´æ–°æ˜¾ç¤º]
    C --> D{å‰©ä½™æ—¶é—´ > 0?}
    D -->|æ˜¯| B
    D -->|å¦| E[è§¦å‘ handle_timeout]
    E --> F[ç¦ç”¨æŒ‰é’®]
    F --> G[æ˜¾ç¤ºè¶…æ—¶æç¤º]
    G --> H[è·¯å¾„å˜é»„åŠ¨ç”»]
    H --> I[ç­‰å¾…2ç§’]
    I --> J[æ¸…ç©ºUIçŠ¶æ€]
    J --> K[ç”Ÿæˆæ–°é¢˜ç›®]
```

## ğŸ“Š ä»£ç å®ç°ç»†èŠ‚

### 1. åˆå§‹åŒ–è®¾ç½®
```gdscript
func setup_ui():
    # åˆå§‹åŒ–å€’è®¡æ—¶æ¡ï¼ˆ8ç§’ï¼‰
    if timer_bar:
        timer_bar.max_value = QUESTION_TIME
        timer_bar.value = QUESTION_TIME
        timer_bar.show_percentage = false
```

### 2. æ¯å¸§æ›´æ–°
```gdscript
func _process(delta):
    if is_waiting_answer and countdown_timer > 0:
        countdown_timer -= delta
        update_timer_display()
        
        if countdown_timer <= 0:
            countdown_timer = 0
            handle_timeout()
```

### 3. è¶…æ—¶å¤„ç†
```gdscript
func handle_timeout():
    # é‡ç½®è¿å‡»
    streak_count = 0
    
    # ç¦ç”¨æŒ‰é’®
    for btn in answer_buttons:
        btn.disabled = true
    
    # æ˜¾ç¤ºåé¦ˆ
    show_feedback("â° æ—¶é—´åˆ°ï¼\næ­£ç¡®ç­”æ¡ˆæ˜¯ X", Color.ORANGE)
    
    # è·¯å¾„åŠ¨ç”»
    animate_paths_timeout()
    
    # 2ç§’åç”Ÿæˆæ–°é¢˜
    await get_tree().create_timer(2.0).timeout
    clear_ui_state()
    generate_new_question()
```

## ğŸ® æ¸¸æˆæµç¨‹

### æ­£å¸¸ç­”é¢˜æµç¨‹
1. é¢˜ç›®ç”Ÿæˆ â†’ `reset_timer()` â†’ 8ç§’å€’è®¡æ—¶å¼€å§‹
2. ç©å®¶ç‚¹å‡»ç­”æ¡ˆ â†’ `stop_timer()` â†’ åˆ¤æ–­å¯¹é”™
3. æ˜¾ç¤ºåé¦ˆ â†’ ç”Ÿæˆä¸‹ä¸€é¢˜

### è¶…æ—¶æµç¨‹
1. å€’è®¡æ—¶å½’é›¶ â†’ `handle_timeout()`
2. æ˜¾ç¤ºè¶…æ—¶æç¤º â†’ è·¯å¾„å˜é»„
3. æ¸…ç©ºUI â†’ ç”Ÿæˆæ–°é¢˜ç›®

### ç­”é”™é‡è¯•æµç¨‹
1. ç­”é”™ â†’ æ˜¾ç¤ºæç¤º
2. `reset_timer()` â†’ é‡æ–°8ç§’å€’è®¡æ—¶
3. é‡æ–°å¯ç”¨æŒ‰é’® â†’ ç­‰å¾…ç©å®¶ç­”é¢˜

## ğŸ¨ åŠ¨ç”»æ•ˆæœ

### å€’è®¡æ—¶æ¡é¢œè‰²
- **0-5ç§’**ï¼šç»¿è‰²ï¼ˆå®‰å…¨ï¼‰
- **5-3ç§’**ï¼šé»„è‰²ï¼ˆè­¦å‘Šï¼‰
- **3-0ç§’**ï¼šçº¢è‰²ï¼ˆå±é™©ï¼‰

### æ—¶é—´æ ‡ç­¾æ•ˆæœ
- **æœ€å3ç§’**ï¼šçº¢è‰² + é—ªçƒç¼©æ”¾
- **æœ€å5ç§’**ï¼šé»„è‰²
- **æ­£å¸¸æ—¶é—´**ï¼šç™½è‰²

### è·¯å¾„åŠ¨ç”»
- **è¶…æ—¶**ï¼šé»„è‰²åœ†åœˆ ğŸŸ¡
- **æ­£ç¡®**ï¼šç»¿è‰²åœ†åœˆ ğŸŸ¢
- **é”™è¯¯**ï¼šçº¢è‰²åœ†åœˆ ğŸ”´

## ğŸ› æµ‹è¯•è¦ç‚¹

### 1. å€’è®¡æ—¶ç²¾åº¦
- ç¡®è®¤8ç§’å‡†ç¡®å€’è®¡æ—¶
- æ£€æŸ¥ `delta` ç´¯åŠ æ˜¯å¦å‡†ç¡®

### 2. è§†è§‰åŒæ­¥
- ProgressBar ä¸å®é™…æ—¶é—´åŒæ­¥
- Label æ˜¾ç¤ºä¸å®é™…ç§’æ•°ä¸€è‡´

### 3. çŠ¶æ€åˆ‡æ¢
- ç­”é¢˜åå€’è®¡æ—¶åœæ­¢
- è¶…æ—¶åUIæ­£ç¡®é‡ç½®
- æ–°é¢˜ç›®å€’è®¡æ—¶æ­£å¸¸å¼€å§‹

### 4. è¾¹ç•Œæƒ…å†µ
- åœ¨æœ€å0.1ç§’ç­”é¢˜
- å¿«é€Ÿè¿ç»­ç”Ÿæˆé¢˜ç›®
- å€’è®¡æ—¶æœŸé—´åˆ‡æ¢åœºæ™¯

## ğŸ“ æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹

```
===== ç”Ÿæˆç¬¬ 1 é¢˜ =====
å€’è®¡æ—¶å·²é‡ç½®ï¼š8ç§’

[5ç§’åæœªç­”é¢˜]
â° ç­”é¢˜è¶…æ—¶ï¼
å€’è®¡æ—¶å·²åœæ­¢
UIçŠ¶æ€å·²æ¸…ç©º

===== ç”Ÿæˆç¬¬ 2 é¢˜ =====
å€’è®¡æ—¶å·²é‡ç½®ï¼š8ç§’
```

## ğŸ”§ é…ç½®è°ƒæ•´

å¦‚éœ€è°ƒæ•´å€’è®¡æ—¶æ—¶é•¿ï¼Œä¿®æ”¹å¸¸é‡ï¼š
```gdscript
const QUESTION_TIME = 8.0  # æ”¹ä¸ºä½ éœ€è¦çš„ç§’æ•°
```

## ğŸ¯ ä¼˜åŒ–å»ºè®®

1. **éŸ³æ•ˆå¢å¼º**
   - æœ€å3ç§’æ»´ç­”å£°
   - è¶…æ—¶è­¦æŠ¥å£°

2. **è§†è§‰å¢å¼º**
   - å€’è®¡æ—¶åœ†å½¢è¿›åº¦æ¡
   - æ•°å­—æ»šåŠ¨åŠ¨ç”»

3. **éš¾åº¦è°ƒèŠ‚**
   - æ ¹æ®é¢˜ç›®éš¾åº¦è°ƒæ•´æ—¶é—´
   - è¿ç»­ç­”å¯¹å‡å°‘æ—¶é—´ï¼ˆå¢åŠ æŒ‘æˆ˜ï¼‰

4. **æš‚åœåŠŸèƒ½**
   - æ·»åŠ æš‚åœ/ç»§ç»­æŒ‰é’®
   - æš‚åœæ—¶å†»ç»“å€’è®¡æ—¶