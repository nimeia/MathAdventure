# 第二关：比较大小桥 - 功能说明

## 🌉 游戏概述

"比较大小桥"是MathAdventure的第二关，小勇士需要比较两个数字的大小并选择正确的符号才能通过桥梁继续前行。

## 🎯 游戏目标

- 观察左右两块石头上的数字
- 选择正确的比较符号（>、<、=）
- 在5秒倒计时内完成选择
- 连续答对5题即可通关

## 🎮 游戏操作

### 鼠标操作
- 点击对应的符号按钮进行选择

### 键盘操作
- **按键1**: 选择 ">" (大于)
- **按键2**: 选择 "<" (小于)  
- **按键3**: 选择 "=" (等于)

## 🎨 视觉效果

### 石头动画
- **出现动画**: 新题目时石头从小到大出现，带弹跳效果
- **碎裂动画**: 答对时石头碎裂消失（缩放+旋转+淡出）
- **闪烁动画**: 答错时石头红色闪烁3次
- **掉落动画**: 超时时石头掉落并旋转

### 按钮效果
- **点击动画**: 按钮缩放和颜色变化
- **正确动画**: 绿色闪烁+放大效果
- **错误动画**: 红色闪烁2次

### UI反馈
- **倒计时显示**: 右上角大数字倒计时，颜色变化提醒
- **符号显示**: 桥中间显示玩家选择的符号
- **反馈文本**: 屏幕中央显示答题结果

## 🎁 奖励系统

### 基础奖励
- **答对**: +1 金币
- **快速答题**: 3秒内答对额外 +1 金币

### 连击奖励
- **连续答对3题**: 获得小宠物🐱陪伴
- **连击被打断**: 答错或超时会重置连击计数

### 关卡完成奖励
- 🗺️ 地图碎片
- 解锁下一关

## 🔧 技术特性

### 数字生成逻辑
```gdscript
# 数字范围：10-99
# 相等概率：20%
# 差距范围：1-30
# 避免过于接近的数字
```

### 健康时长控制
- 集成健康游戏时长限制
- 支持进度保存和恢复
- 休息时间到期自动跳转

### 数据持久化
- 自动保存金币数量
- 记录游戏进度
- 支持跨关卡数据传递

## 📋 游戏常量

可在 `Level2Manager.gd` 中调整的参数：

```gdscript
const COUNTDOWN_TIME = 5.0              # 每题倒计时
const MIN_NUMBER = 10                   # 最小数字
const MAX_NUMBER = 99                   # 最大数字  
const MIN_DIFFERENCE = 1                # 最小差距
const MAX_DIFFERENCE = 30               # 最大差距
const QUESTIONS_PER_LEVEL = 5           # 每关题目数
const QUICK_ANSWER_TIME = 3.0           # 快答阈值
const STREAK_BONUS_THRESHOLD = 3        # 连击奖励阈值
```

## 🗂️ 文件结构

```
scenes/Level2.tscn                   # 主场景文件
scripts/Level2Manager.gd             # 核心游戏逻辑
scripts/NumberStone.gd               # 石头组件
scripts/ComparisonButton.gd          # 按钮组件
```

## 🎪 游戏流程

### 1. 游戏开始
1. 检查健康时长状态
2. 加载之前的金币数据
3. 生成第一道题目

### 2. 题目流程
1. 随机生成两个数字（A, B）
2. 石头出现动画显示数字
3. 启动5秒倒计时
4. 等待玩家选择符号
5. 处理答案并播放相应动画
6. 更新奖励和统计

### 3. 答题结果
- **正确**: 石头碎裂 → 金币奖励 → 下一题
- **错误**: 石头闪烁 → 重新倒计时 → 继续当前题
- **超时**: 石头掉落 → 显示正确答案 → 下一题

### 4. 关卡完成
1. 连续完成5题
2. 显示统计数据
3. 播放完成动画
4. 跳转到下一关

## 🐛 调试功能

### 控制台输出
- 题目生成信息
- 玩家选择记录
- 奖励计算详情
- 动画播放状态

### 快速测试
- 修改常量快速调试
- 使用F键快捷键测试健康时长

## 🔄 扩展建议

### 短期优化
- [ ] 添加音效文件
- [ ] 优化动画时长
- [ ] 增加更多石头样式
- [ ] 添加粒子效果

### 长期扩展
- [ ] 更多小宠物类型
- [ ] 不同难度级别
- [ ] 特殊题目类型
- [ ] 成就系统

---

**注意**: 这是一个教育导向的数学游戏关卡，设计重点在于让玩家在愉快的游戏体验中学习数字比较的概念。所有的动画和反馈都旨在提供积极的学习环境。